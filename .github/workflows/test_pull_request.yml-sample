name: test-pull-request

on:
  workflow_dispatch:
  pull_request:
    branches: [main, dev]
    types: [opened, synchronize, reopened]

jobs:
  # --- EDIT MODE ---

  test-unity-2022-3-62f3-editmode:
    uses: ./.github/workflows/test_unity_plugin.yml
    with:
      projectPath: "./Unity-Tests/2022.3.62f3"
      unityVersion: "2022.3.62f3"
      testMode: "editmode"
    secrets: inherit

  test-unity-2023-2-22f1-editmode:
    uses: ./.github/workflows/test_unity_plugin.yml
    with:
      projectPath: "./Unity-Tests/2023.2.22f1"
      unityVersion: "2023.2.22f1"
      testMode: "editmode"
    secrets: inherit

  test-unity-6000-3-1f1-editmode:
    uses: ./.github/workflows/test_unity_plugin.yml
    with:
      projectPath: "./Unity-Tests/6000.3.1f1"
      unityVersion: "6000.3.1f1"
      testMode: "editmode"
    secrets: inherit

  # --- PLAY MODE ---

  test-unity-2022-3-62f3-playmode:
    uses: ./.github/workflows/test_unity_plugin.yml
    with:
      projectPath: "./Unity-Tests/2022.3.62f3"
      unityVersion: "2022.3.62f3"
      testMode: "playmode"
    secrets: inherit

  test-unity-2023-2-22f1-playmode:
    uses: ./.github/workflows/test_unity_plugin.yml
    with:
      projectPath: "./Unity-Tests/2023.2.22f1"
      unityVersion: "2023.2.22f1"
      testMode: "playmode"
    secrets: inherit

  test-unity-6000-3-1f1-playmode:
    uses: ./.github/workflows/test_unity_plugin.yml
    with:
      projectPath: "./Unity-Tests/6000.3.1f1"
      unityVersion: "6000.3.1f1"
      testMode: "playmode"
    secrets: inherit

  # --- STANDALONE ---

  test-unity-2022-3-62f3-standalone:
    uses: ./.github/workflows/test_unity_plugin.yml
    with:
      projectPath: "./Unity-Tests/2022.3.62f3"
      unityVersion: "2022.3.62f3"
      testMode: "standalone"
    secrets: inherit

  test-unity-2023-2-22f1-standalone:
    uses: ./.github/workflows/test_unity_plugin.yml
    with:
      projectPath: "./Unity-Tests/2023.2.22f1"
      unityVersion: "2023.2.22f1"
      testMode: "standalone"
    secrets: inherit

  test-unity-6000-3-1f1-standalone:
    uses: ./.github/workflows/test_unity_plugin.yml
    with:
      projectPath: "./Unity-Tests/6000.3.1f1"
      unityVersion: "6000.3.1f1"
      testMode: "standalone"
    secrets: inherit

  # -------------------
